<%= page_header "Coaching Period - " + @period.name %>
<%= flash_header %>

<div class="grid_4">
	<%= link_to 'Show all people', list_period_url(@period) %>
	<br>
	<%= link_to 'Edit report fields', fields_period_url(@period) %>
	<br>
	<br>
	<h2 width="100%" align="center">Administrators</h2>
	<% if @period.admins.nil? or @period.admins.count == 0 -%>
		<i>None</i>
	<% else -%>
		<ul>
			<% for a in @period.period_admins.sort_by{ |a| [a.user.last_name, a.user.first_name]} -%>
				<li>
					<%= link_to a.user.display_name, a.user %>
					<%= link_to image_tag('icons/silk/delete.png'), a, method: :delete, data: { confirm: 'Are you sure you want to remove this admin?' } %>
				</li>
			<% end -%>
		</ul>
	<% end -%>
	<%= form_for [@period, @new_admin] do |f| -%>
		<%= f.hidden_field :user_id %>
		<%= autocomplete_field :admin, :name, autocomplete_users_url, :id_element => '#period_admin_user_id', :size => 12 %>
		<%= f.submit 'Add Admin' %>
	<% end -%>
</div>

<div class="grid_4">
	<h2 width="100%" align="center">Teams</h2>
	<% if @period.teams.nil? or @period.teams.count == 0 -%>
		<i>None</i>
	<% else -%>
		<ul>
			<% for t in @period.teams -%>
				<li>
					<%= link_to t.name, t %>,
					<% if t.leaders.nil? or t.leaders.count == 0 -%>
						Leaders: <i>None</i>
					<% elsif t.leaders.count == 1 -%>
						Leader: <%= t.leaders.first.display_name %>
					<% else -%>
						Leaders: <%= t.leaders.first.display_name -%><% for index in 1..t.leaders.count-1 -%>, <%= t.leaders[index].display_name -%><% end -%>
					<% end -%>
				</li>
			<% end -%>
		</ul>
	<% end -%>
	<%# Will be automated -%>
	<% form_for [@period, @new_team] do |f| -%>
		<%= f.text_field :name, :size => 12 %>
		<%= f.submit %>
	<% end -%>
</div>

<div class="grid_4">
	<h2 width="100%" align="center">Coaching Groups</h2>
	<% if @period.groups.nil? or @period.groups.count == 0 -%>
		<i>None</i>
	<% else -%>
		<ul>
			<% for g in @period.groups -%>
				<li>
					<%= link_to g.name, g %>,
					<% if g.coaches.nil? or g.coaches.count == 0 -%>
						Coaches: <i>None</i>
					<% elsif g.coaches.count == 1 -%>
						Coach: <%= g.coaches.first.display_name %>
					<% else -%>
						Coaches: <%= g.coaches.first.display_name -%>
						<% for index in 2..g.coaches.count -%>, <%= g.coaches[index].display_name -%><% end -%>
					<% end -%>
				</li>
			<% end -%>
		</ul>
	<% end -%>
	<%# Will be automated -%>
	<% form_for [@period, @new_group] do |f| -%>
		<%= f.text_field :name, :size => 12 %>
		<%= f.submit %>
	<% end -%>
</div>

<div class="clear"></div>
