<% title @user.display_name %>

<div class="span4">
  <dl class="dl-horizontal">
    <dt>First Name</dt>
      <dd><%= @user.first_name %></dd>
    <% if @user.preferred_name and @user.preferred_name != @user.first_name -%>
      <dt>Preferred Name</dt>
        <dd><%= @user.preferred_name %></dd>
    <% end -%>
    <dt>Last Name</dt>
      <dd><%= @user.last_name %></dd>
    <dt>Account Number</dt>
      <dd><%= @user.account_number %></dd>
    <dt>Phone Number</dt>
      <dd><%= @user.phone %></dd>
    <dt>Email Address</dt>
      <dd><%= @user.email %></dd>

    <dt>&nbsp;</dt>
      <dd>&nbsp;</dd>

    <% if @user.can_edit?(@cas_user) -%>
      <dt>Edit</dt>
        <dd><%= button_to 'Edit', edit_user_path(@user), method: 'get', class: 'btn' %></dd>
    <% end -%>
    <% if @user.can_sudo?(true_user) -%>
      <dt>Sudo <%= help_tip 'Assume the permissions of this person' %></dt>
        <dd><%= button_to 'Assume', sudo_user_path(@user), method: 'get', class: 'btn' %></dd>
    <% end -%>
    <% if @cas_user.is_admin? -%>
      <dt>Admin <%= help_tip 'Grants this user Admin priveleges' %></dt>
        <dd>
          <% if @user.is_admin? %>
            <%= button_to 'Revoke', toggle_admin_user_path(@user), class: 'btn' %>
          <% else -%>
            <%= button_to 'Grant', toggle_admin_user_path(@user), class: 'btn' %>
          <% end -%>
        </dd>
      <dt>Delete</dt>
        <dd>
          <%= button_to 'Delete',
            @user,
            method: 'delete',
            data: {confirm:
'Are you sure you want to delete this user and all objects dependent on it?
This cannot be undone.'
            },
            class: 'btn'
          %>
        </dd>
    <% end -%>
  </dl>
</div>

<div class="span8">
  <%= render :partial => 'roles' %>
</div>
