<% title @user.display_name %>

<div class="span4 well well-small">
  <table class="mytable">
    <tr>
      <th>First Name</th>
      <td><%= @user.first_name %></td>
    </tr>
    <% if @user.preferred_name and @user.preferred_name != @user.first_name -%>
      <tr>
        <th>Preferred Name</th>
        <td><%= @user.preferred_name %></td>
      </tr>
    <% end -%>
    <tr>
      <th>Last Name</th>
      <td><%= @user.last_name %></td>
    </tr>
    <tr>
      <th>Account Number</th>
      <td><%= @user.account_number %></td>
    </tr>
    <% if @cas_user.is_admin? -%>
      <tr>
        <th>GUID <%= help_tip 'Admin only' %></th>
        <td><%= @user.guid %></td>
      </tr>
    <% end -%>
    <tr>
      <th>Phone Number</th>
      <td><%= @user.phone %></td>
    </tr>
    <tr>
      <th>Email Address</th>
      <td><%= @user.email %></td>
    </tr>

    <tr>
      <td>&nbsp;</td>
    </tr>

    <% if @user.can_edit?(@cas_user) -%>
      <tr>
        <th>Edit</th>
        <td><%= link_to 'Edit', edit_user_path(@user), class: 'btn' %></td>
      </tr>
    <% end -%>
    <% if @user.can_sudo?(true_user) -%>
      <tr>
        <th>Sudo <%= help_tip 'Assume the permissions of this person' %></th>
        <td><%= link_to 'Assume', sudo_user_path(@user), class: 'btn' %></td>
      </tr>
    <% end -%>
    <% if @cas_user.is_admin? -%>
      <tr>
        <th>Admin <%= help_tip 'Grants this user Admin priveleges' %></th>
        <td>
          <% if @user.is_admin? %>
            <%= link_to 'Revoke', toggle_admin_user_path(@user), method: 'post', class: 'btn' %>
          <% else -%>
            <%= link_to 'Grant', toggle_admin_user_path(@user), method: 'post', class: 'btn' %>
          <% end -%>
        </td>
      </tr>
      <tr>
        <th>Delete</th>
        <td>
          <%= link_to 'Delete',
            @user,
            method: 'delete',
            data: {confirm:
'Are you sure you want to delete this user and all objects dependent on it?
This cannot be undone.'
            },
            class: 'btn'
          %>
        </td>
      </tr>
    <% end -%>
  </table>
</div>

<div class="span8 well well-small">
  <%= render :partial => 'roles' %>
</div>
